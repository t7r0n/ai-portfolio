---
import BaseLayout from '../layouts/BaseLayout.astro'
import Nav from '../components/Nav.astro'
import Footer from '../components/Footer.astro'
import { getCollection } from 'astro:content'
import { siteConfig } from '../site.config'
const featured = (await getCollection('projects')).filter(p => p.data.featured).slice(0,3)
---

<BaseLayout>
  <Fragment slot="nav"><Nav /></Fragment>
  <section class="space-y-6">
    <h1 class="text-4xl font-bold tracking-tight">{siteConfig.fullName}</h1>
    <p class="text-lg text-neutral-600 dark:text-neutral-300">{siteConfig.tagline}</p>
    <div class="flex gap-3">
      <a href="/projects/" class="inline-flex items-center rounded-lg bg-primary/10 text-primary px-3 py-2 hover:bg-primary/15 transition">View Projects</a>
      <a href="mailto:you@example.com" class="inline-flex items-center rounded-lg border border-black/10 dark:border-white/10 px-3 py-2 hover:bg-black/5 dark:hover:bg-white/5 transition">Contact</a>
    </div>
  </section>
  {featured.length > 0 && (
    <section class="mt-12">
      <h2 class="text-2xl font-semibold mb-4">Featured Projects</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {featured.map(p => (
          <a href={`/projects/${p.slug}/`} class="group rounded-2xl p-5 border border-black/5 dark:border-white/5 shadow-soft hover:-translate-y-0.5 hover:shadow-md transition">
            <h3 class="font-semibold mb-2 group-hover:text-primary transition">{p.data.title}</h3>
            <p class="text-sm text-neutral-600 dark:text-neutral-300">{p.data.summary}</p>
          </a>
        ))}
      </div>
    </section>
  )}
  <Fragment slot="footer"><Footer /></Fragment>
</BaseLayout>
