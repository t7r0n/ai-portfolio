---
import BaseLayout from '../../layouts/BaseLayout.astro'
import Nav from '../../components/Nav.astro'
import Footer from '../../components/Footer.astro'
import { getEntryBySlug, getCollection } from 'astro:content'
const { slug } = Astro.params
const entry = await getEntryBySlug('projects', slug!)
if (!entry) throw new Error('Project not found')
const { Content } = await entry.render()

export async function getStaticPaths() {
  const projects = await getCollection('projects')
  return projects.map((p) => ({ params: { slug: p.slug } }))
}
---
<BaseLayout title={entry.data.title}>
  <Fragment slot="nav"><Nav /></Fragment>
  <article class="prose dark:prose-invert">
    <h1 class="mb-4">{entry.data.title}</h1>
    <p class="text-neutral-600 dark:text-neutral-300">{entry.data.summary}</p>
    <Content />
  </article>
  <Fragment slot="footer"><Footer /></Fragment>
</BaseLayout>
